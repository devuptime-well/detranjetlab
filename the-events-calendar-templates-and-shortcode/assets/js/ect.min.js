(function(e){function t(t,n,c){var a=n.parents(".ect-load-more").find("#ect-lm-settings"),o=a.data("ajax-url"),i=a.data("settings"),d=a.attr("data-exclude-events"),r=a.data("load-more"),s=a.data("loading"),v=a.data("loaded"),f=a.siblings("#ect-query-arg").html(),l=JSON.parse(f),u=n.attr("data-paged");n.find(".ect-preloader").show(),n.find("span").text(s);var p={action:"ect_common_load_more",query:l,exclude_events:d,settings:i};jQuery.post(o,p,function(c){var o=JSON.parse(c);"yes"==o.events?setTimeout(function(){var c=o.content;if(e.each(c,function(n,c){var a=e(c);t.append(a)}),u=parseInt(u)+1,o.exclude_events){var i=JSON.parse(d);newExcludeList=i.concat(JSON.parse(o.exclude_events)),a.attr("data-exclude-events","["+newExcludeList+"]")}n.find("span").text(r),n.find(".ect-preloader").hide()},200):(n.find(".ect-preloader").hide(),n.find("span").text(v),setTimeout(function(){n.hide().find("span").text(r),a.find("#ect-cat-load-more").hide()},1500))})}function n(t){var n=t;n.on("click",".ect-accordion-header",function(){var t=e(this);if(t.hasClass("active-event"))return t.parent(".ect-accordion-event").find(".ect-accordion-footer").removeClass("show-event"),t.removeClass("active-event"),void t.parent(".ect-accordion-event").removeClass("active-event");n.find(".ect-accordion-footer").removeClass("show-event"),n.find(".ect-accordion-header").removeClass("active-event"),n.find(".ect-accordion-event").removeClass("active-event"),t.parent(".ect-accordion-event").find(".ect-accordion-footer").addClass("show-event"),t.addClass("active-event"),t.parent(".ect-accordion-event").addClass("active-event");var c=t.offset();c.top-=90,e("html, body").stop().animate({scrollTop:c.top},1e3)})}jQuery(document).ready(function(e){e(".ect-accordion-view").each(function(){var t=e(this);t.find(".ect-accordion-footer:first").addClass("show-event"),t.find(".ect-accordion-header:first").addClass("active-event"),t.find(".ect-accordion-event:first").addClass("active-event"),n(t)}),e(".ectt-list-wrapper").each(function(){const n=e(this);n.find(".ect-load-more-btn").on("click",function(){const n="list",c=e(this),a=c.parents("#ect-events-list-content").find("div.ect-list-wrapper");return t(e(a),c,n),!1})}),e(".ect-accordion-view").each(function(){const n=e(this);n.find(".ect-load-more-btn").on("click",function(){const c="accordion",a=e(this),o=n.find(".ect-accordion-container");return t(e(o),a,c),!1})}),e(".tect-grid-wrapper").each(function(){const n=e(this);n.find(".ect-load-more-btn").on("click",function(){const c="grid",a=e(this),o=n.find("div.row");return t(e(o),a,c),!1})})})})(jQuery);